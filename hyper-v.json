{  
   "variables":{  
      "product_key":""
   },
   "builders":[  
      {  
         "type":"hyperv-iso",
         "guest_os_type":"WindowsServer2012R2Datacenter",
         "product_key":"{{user `product_key`}}",
         "iso_url":"ubuntu-os.iso",
         "disk_size_gb":20,
         "ram_size_mb":512,
         "wait_time_minutes":"10",
         "boot_command":[  
            "<esc><esc><enter><wait>",
            "/install/vmlinuz noapic preseed/url=http://{{ .HTTPIP }}:{{ .HTTPPort }}/preseed.cfg ",
            "debian-installer=en_US auto locale=en_US kbd-chooser/method=us ",
            "hostname={{ .Name }} ",
            "fb=false debconf/frontend=noninteractive ",
            "keyboard-configuration/modelcode=SKIP keyboard-configuration/layout=USA keyboard-configuration/variant=USA console-setup/ask_detect=false ",
            "initrd=/install/initrd.gz -- <enter>"
         ],
         "headless":true
      }
   ],
   "provisioners":[  
      {  
         "type":"shell",
         "scripts":[  
            "scripts/base.sh",
            "scripts/fix-data-lines.sh",
            "scripts/hyperv.sh",
            "scripts/vagrant.sh",
            "scripts/dep.sh",
            "scripts/cleanup.sh",
            "scripts/zerodisk.sh"
         ],
         "override":{  
            "hyperv-iso":{  
               "execute_command":"echo 'vagrant'|sudo -S bash '{{.Path}}'"
            }
         }
      }
   ],
   "post-processors":[  
      {  
         "type":"vagrant",
         "compression_level":1
      }
   ]
}